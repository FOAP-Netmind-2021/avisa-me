<!-- Card Enabled -->
<% allTasks.forEach(task => { %>
  
  <% if(!task.finishedDate) { %> 

    <div class="d-flex flex-column gap-3 col-12 col-sm-4 col-md-3 col-lg-2">
      
      <!-- Task -->
      <div id="task-title-<%=task._id%>" class="d-flex flex-column card _cardMain _cardInput" 
        data-id="<%=task._id%>" onfocusout="onFocusUpdate(event)" style="background-color: <%=task.color%>" >
       
        <div class="textMenu d-flex flex-row justify-content-between text-break" >

          <!-- Task title -->
          <div id="task-title-<%=task._id%>" class="d-flex card-title _cardInput text-break task--title">
            <p contenteditable="true"><%= task.title %></p>
          </div>

          <!-- Delete Action -->
          <div>
            <a href="#" class="d-flex" contenteditable="false" >
              <!-- <i class="bi bi-x-square"></i> -->
            </a>
          </div>

        </div>
        
         <!-- Task text  -->
        <div id="task-text-<%=task._id%>" class="text-break"> <!-- form-control _card__title -->
         
          <p id="task-text-<%=task._id%>" contenteditable="true" class="card-text" placeholder="AÃ±adir una nota">
            <%= task.text %>
          </p>
          </div>
          
          <!-- Action Icons -->
          
            <div class="d-flex justify-content-between">
              <a data-id-complete="<%= task._id %>" href="/tasks/<%= task._id %>/completed" class="d-flex p-2" ><i class="bi bi-check-lg"></i></a>
              <!-- <a href="#" class="d-flex p-2" ><i class="bi-bell"></i></a> -->
              <!-- <a href="#" class="d-flex p-2"><i class="bi bi-upload"></i></a> -->
                <div class="dropup" >       
                <button class="iconify"   data-icon="noto:artist-palette" data-inline="false"></button>
                <div class="dropup-content" data-id-colores="<%=task._id%>" onclick="updateTask(event)" > 
                  <div>
                    <button  class="dropup-toggle" type="button"  data-toggle="dropup" aria-haspopup="true" aria-expanded="false" data-toggle-second="tooltip" data-placement="right" title="Skin"  style="background-color:#fadda4; border-radius: 50px; height: 25px; width: 25px; border: 1px rgba(0, 0, 0, 0.300) solid;" ></button>
                    <button  class="dropup-toggle" type="button"  data-toggle="dropup" aria-haspopup="true" aria-expanded="false" data-toggle-second="tooltip" data-placement="right" title="Yellow"   style="background-color:#fcf7a4; border-radius: 50px; height: 25px; width: 25px; border: 1px rgba(0, 0, 0, 0.300) solid;" ></button>
                    <button  class="dropup-toggle" type="button"  data-toggle="dropup" aria-haspopup="true" aria-expanded="false" data-toggle-second="tooltip" data-placement="right" title="White"   style="background-color:#ffffff; border-radius: 50px; height: 25px;width: 25px; border: 1px rgba(0, 0, 0, 0.300) solid;" ></button>
                    <bStton  class="dropup-toggle" type="button"  data-toggle="dropup" aria-haspopup="true" aria-expanded="false" data-toggle-second="tooltip" data-placement="right" title="Orange"   style="background-color: #facc81; border-radius: 50px; height: 25px;width: 25px; border: 1px rgba(0, 0, 0, 0.300) solid;" ></button>
                  </div>
                  <div>
                    <button  class="dropup-toggle" type="button"  data-toggle="dropup" aria-haspopup="true" aria-expanded="false" data-toggle-second="tooltip" data-placement="right" title="Green"   style="background-color:#a5f59e; border-radius:50px; height: 25px;width: 25px; border: 1px rgba(0, 0, 0, 0.300) solid;" ></button>
                    <button  class="dropup-toggle" type="button"  data-toggle="dropup" aria-haspopup="true" aria-expanded="false" data-toggle-second="tooltip" data-placement="right" title="Cyan"   style="background-color: #99f5d6; border-radius: 50px; height: 25px;width: 25px; border: 1px rgba(0, 0, 0, 0.300) solid;" ></button>
                    <button  class="dropup-toggle" type="button"  data-toggle="dropup" aria-haspopup="true" aria-expanded="false" data-toggle-second="tooltip" data-placement="right" title="Blue"   style="background-color: #9edbf5 ; border-radius: 50px; height: 25px;width: 25px; border: 1px rgba(0, 0, 0, 0.300) solid;" ></button>
                    <button  class="dropup-toggle" type="button"  data-toggle="dropup" aria-haspopup="true" aria-expanded="false" data-toggle-second="tooltip" data-placement="right" title="Dark Blue"   style="background-color: #949ef7 ; border-radius: 50px; height: 25px;width: 25px; border: 1px rgba(0, 0, 0, 0.300) solid;"></button>
                </div>
                <div>
                  <button  class="dropup-toggle" type="button"  data-toggle="dropup" aria-haspopup="true" aria-expanded="false" data-toggle-second="tooltip" data-placement="right" title="Purple"   style="background-color:#bf9dfa; border-radius:50px; height: 25px;width: 25px; border: 1px rgba(0, 0, 0, 0.300) solid;"></button>
                  <button  class="dropup-toggle" type="button"  data-toggle="dropup" aria-haspopup="true" aria-expanded="false" data-toggle-second="tooltip" data-placement="right" title="Pink"   style="background-color: #faacf3; border-radius: 50px; height: 25px;width: 25px; border: 1px rgba(0, 0, 0, 0.300) solid;"></button>
                  <button  class="dropup-toggle" type="button"  data-toggle="dropup" aria-haspopup="true" aria-expanded="false" data-toggle-second="tooltip" data-placement="right" title="Gray"   style="background-color: #8f657457; border-radius: 50px; height: 25px;width: 25px; border: 1px rgba(0, 0, 0, 0.300) solid;"></button>
              </div>
                </div>
              </div>

            </div>
        
          </div>
</div>       
  <% } %>
<% }) %> 


<style>
  .dropbtn {
    background-color: #3498DB;
    color: white;
    padding: 16px;
    font-size: 16px;
    border: none;

  }

  button[title]{
    border-radius: 50px;
  }
  
  .dropup {
    position: absolute;
    margin-left: 30px;
    margin-top: 0.4rem;
    display: inline-block;
  }
  
  .dropup-content {
    display: none;
    position: absolute;
    background-color: #f1f1f1;
    width: 8rem;
    bottom: 20px;
    z-index: 1;
    border-radius: 8px;
    border: 0.5px rgba(0, 0, 0, 0.320) solid;
    padding-left: 4px;
    padding-top: 3px;
    margin-left: 8px;

  }
  
  .dropup-content a {
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
  }
  
  .dropup-content a:hover {background-color: #ccc}
  
  .dropup:hover .dropup-content {
    display: block; 
  }
  
  .dropup:hover .dropbtn {
    background-color: #2980B9;
  }
  </style>